# Define the storage account names
$storageAccounts = @("Account1", "Account2", "Account3")

# Initialize an empty array to store the results
$results = @()

# Loop through each storage account
foreach ($account in $storageAccounts) {
    # Get the storage account key
    $keys = Get-AzStorageAccountKey -ResourceGroupName "YourResourceGroupName" -Name $account
    $storageAccountKey = $keys[0].Value

    # Create the storage context
    $ctx = New-AzStorageContext -StorageAccountName $account -StorageAccountKey $storageAccountKey

    # List the containers
    $containers = Get-AzStorageContainer -Context $ctx

    # Add the results to the array
    foreach ($container in $containers) {
        $results += [pscustomobject]@{
            StorageAccount = $account
            ContainerName  = $container.Name
        }
    }
}

# Export the results to a CSV file
$results | Export-Csv -Path "StorageAccountContainers.csv" -NoTypeInformation