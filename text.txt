trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:
- powershell: |
    $jsonFiles = Get-ChildItem -Path . -Filter *.json -Recurse
    foreach ($file in $jsonFiles) {
        Write-Host "Validating $($file.FullName)"
        try {
            $content = Get-Content $file.FullName | Out-String | ConvertFrom-Json
        } catch {
            Write-Error "$($file.FullName) is not valid JSON."
            exit 1
        }
    }
  displayName: 'Check JSON Syntax'